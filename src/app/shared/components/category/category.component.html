<mat-toolbar>Categories</mat-toolbar>
<mat-nav-list *ngFor="let category of categories$|async">
  <ng-container *ngIf="category?.subCategories?.length > 1; else noSubCategory">
    <a mat-list-item role="button" (click)="showSubCategory(subCategories, category?.subCategories)">{{category?.name}} <mat-icon class="ml-auto">navigate_next</mat-icon></a>
  </ng-container>
  <ng-template #noSubCategory>
    <a mat-list-item role="button" (click)="search(category?.id)">{{category?.name}}</a>
  </ng-template>
</mat-nav-list>

<ng-template #subCategories let-data>
  <h2 mat-dialog-title mat-dialog-close>
    <mat-icon >arrow_back</mat-icon>
  </h2>
  <mat-dialog-content>
    <mat-nav-list *ngFor="let category of data">
      <ng-container *ngIf="category?.subCategories?.length > 1; else noSubCategory">
        <a mat-list-item role="button" (click)="showSubCategory(subCategories, category?.subCategories)">{{category?.name}} <mat-icon class="ml-auto">navigate_next</mat-icon></a>
      </ng-container>
      <ng-template #noSubCategory>
        <a mat-list-item role="button" (click)="search(category?.id, true)">{{category?.name}}</a>
      </ng-template>
    </mat-nav-list>
  </mat-dialog-content>
</ng-template>